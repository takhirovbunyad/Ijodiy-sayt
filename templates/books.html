
{% load static %}
<link rel="stylesheet" href="{% static 'css/books.css' %}">
<link rel="stylesheet" href="{% static 'css/sidebar.css' %}">

<img id="hamburger" class="hamburger-icon" src="https://www.svgrepo.com/show/506247/menu-vertical.svg" alt="Menu">


  {% include "sidebar.html" %}

<div class="book-grid">
    {% for book in books %}
    <div class="book-card"
         data-title="{{ book.title }}"
         data-owner="{{ book.owner }}"
         data-description="{{ book.description }}"
         data-img="{{ book.img.url }}"
         data-file="{% if book.file %}{{ book.file.url }}{% endif %}"
         data-url="{% if book.url %}{{ book.url }}{% endif %}"
         data-audio="{% if book.audio %}{{ book.audio.url }}{% endif %}"
         data-audio-duration="{{ book.audio_duration }}"
         data-file-type="{{ book.file_type }}">

        <img src="{{ book.img.url }}" alt="{{ book.title }}">
        <h3>{{ book.title }}</h3>
        <p>{{ book.description|truncatewords:12 }}</p>
        <span class="owner">👤 {{ book.owner }}</span>
    </div>
    {% endfor %}
</div>

<!-- MODAL -->
<div id="bookModal" class="modal">
    <div class="modal-content">
        <span class="close">&times;</span>

        <h2 id="modalTitle"></h2>
        <p id="modalOwner"></p>
        <img id="modalImage" src="" alt="Kitob rasmi" style="max-width: 200px;">

        <p id="modalDescription"></p>

        <!-- Kitobni o‘qish -->
        <iframe id="modalReader" src="" width="100%" height="400px" style="display:none;"></iframe>

        <!-- Yuklab olish -->
        <a id="modalFileDownload" href="" download style="display:none;">📥 Kitobni yuklab olish</a>

        <!-- Audio -->
        <div id="modalAudioBlock" style="display:none;">
            <audio id="modalAudio" controls></audio>
            <p>⏳ Audio davomiyligi: <span id="modalAudioDuration"></span></p>
            <a id="modalAudioDownload" href="" download>📥 Audio yuklab olish</a>
        </div>

        <p>📄 Fayl turi: <span id="modalFileType"></span></p>
    </div>
</div>
<script src="{% static 'js/books.js' %}"></script>